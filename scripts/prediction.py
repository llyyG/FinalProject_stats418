# -*- coding: utf-8 -*-
"""prediction_endgame.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1CgPxFdQjbP0we64BK7icINBQtzt5EdqZ
"""

import pandas as pd
import numpy as np
import statsmodels as sm
from statsmodels.tsa.arima_model import ARIMA
# import matplotlib.pyplot as plt

data = pd.read_csv('scripts/Gross_of_Avengers4.csv')

test_AV4 = data.iloc[30:38,0:2]

train_diff = data - data.shift()
train_diff = train_diff.dropna().values
test_diff = test_AV4 - test_AV4.shift()
test_diff = test_diff.dropna().values

model_train = ARIMA(train_diff, order=(1, 0, 0))  
results_train = model_train.fit()

def predict(dict_values, model=results_train):
    days = int(dict_values['days'])
    pred = model.predict(start=30, end=30+days)
    dgross = pred
    tgross = pred
    dgross[0] = dgross[0]+6452368
    tgross[0] = dgross[0]+792062780
    for i in range(1, len(output)):
      dgross[i] = dgross[i] + 6452368
      tgross[i] = dgross[i] + tgross[i - 1]
      output = {'Daily Gross':dgross, 'Total Gross':tgross}
      output = pd.DataFrame(data=output)
    return output